{{template "base" .}}
{{define "content"}}
<h1>Dashboard</h1>

<div class="stats">
    <div class="stat">
        <div class="stat-value">{{.Stats.scopes}}</div>
        <div class="stat-label">Active Scopes</div>
    </div>
    <div class="stat">
        <div class="stat-value">{{.Stats.active_leases}}</div>
        <div class="stat-label">Active Leases</div>
    </div>
    <div class="stat">
        <div class="stat-value">{{.Stats.reservations}}</div>
        <div class="stat-label">Reservations</div>
    </div>
    <div class="stat">
        <div class="stat-value">{{.Stats.leases}}</div>
        <div class="stat-label">Total Leases</div>
    </div>
</div>

<div class="card">
    <div class="card-title">Scopes</div>
    {{if .Scopes}}
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Network</th>
                <th>Range</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {{range .Scopes}}
            <tr>
                <td>{{.Name}}</td>
                <td>{{.Network}}</td>
                <td>{{.RangeStart}} - {{.RangeEnd}}</td>
                <td>
                    {{if .Enabled}}
                    <span class="badge badge-success">Active</span>
                    {{else}}
                    <span class="badge badge-danger">Disabled</span>
                    {{end}}
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
    {{else}}
    <p class="text-muted">No scopes configured. <a href="/scopes/new">Create one</a></p>
    {{end}}
</div>

<div class="card">
    <div class="card-title">Recent Leases</div>
    {{if .RecentLeases}}
    <table>
        <thead>
            <tr>
                <th>IP Address</th>
                <th>MAC Address</th>
                <th>Hostname</th>
                <th>Expires</th>
            </tr>
        </thead>
        <tbody>
            {{range .RecentLeases}}
            <tr>
                <td>{{.IP}}</td>
                <td>{{.MAC}}</td>
                <td>{{if .Hostname}}{{.Hostname}}{{else}}<span class="text-muted">-</span>{{end}}</td>
                <td>{{.ExpiresAt.Format "2006-01-02 15:04"}}</td>
            </tr>
            {{end}}
        </tbody>
    </table>
    {{else}}
    <p class="text-muted">No leases yet.</p>
    {{end}}
</div>
{{end}}
