{{template "base" .}}
{{define "content"}}
<h1>{{if .IsNew}}New Scope{{else}}Edit Scope{{end}}</h1>

<div class="card" style="max-width: 600px;">
    {{if .Error}}
    <div class="alert alert-error">{{.Error}}</div>
    {{end}}

    <form method="POST">
        <div class="form-group">
            <label>Name</label>
            <input type="text" name="name" value="{{.Scope.Name}}" required placeholder="e.g. Office Network">
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Network (CIDR)</label>
                <input type="text" name="network" value="{{.Scope.Network}}" required placeholder="e.g. 10.72.102.0/24">
            </div>
            <div class="form-group">
                <label>Subnet Mask</label>
                <input type="text" name="subnet_mask" value="{{.Scope.SubnetMask}}" required placeholder="e.g. 255.255.255.0">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Range Start</label>
                <input type="text" name="range_start" value="{{.Scope.RangeStart}}" required placeholder="e.g. 10.72.102.2">
            </div>
            <div class="form-group">
                <label>Range End</label>
                <input type="text" name="range_end" value="{{.Scope.RangeEnd}}" required placeholder="e.g. 10.72.102.240">
            </div>
        </div>

        <div class="form-group">
            <label>Gateway</label>
            <input type="text" name="gateway" value="{{.Scope.Gateway}}" required placeholder="e.g. 10.72.102.1">
        </div>

        <div class="form-group">
            <label>DNS Servers (comma separated)</label>
            <input type="text" name="dns" value="{{.Scope.DNS}}" required placeholder="e.g. 8.8.8.8, 8.8.4.4">
        </div>

        <div class="form-group">
            <label>Lease Duration (seconds)</label>
            <input type="number" name="lease_duration" value="{{.Scope.LeaseDuration}}" required>
            <small class="text-muted">86400 = 1 day, 604800 = 7 days</small>
        </div>

        <div class="form-group">
            <label>
                <input type="checkbox" name="enabled" {{if .Scope.Enabled}}checked{{end}}> Enabled
            </label>
        </div>

        <div class="flex gap-2 mt-4">
            <button type="submit" class="btn">{{if .IsNew}}Create Scope{{else}}Save Changes{{end}}</button>
            <a href="/scopes" class="btn btn-secondary">Cancel</a>
            {{if not .IsNew}}
            <button type="submit" name="_method" value="DELETE" class="btn btn-danger" onclick="return confirm('Delete this scope?')">Delete</button>
            {{end}}
        </div>
    </form>
</div>
{{end}}
